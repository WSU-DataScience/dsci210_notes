<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5.2. BASH SHELL - GREP &mdash; Runestone Interactive Overview</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="_static/activecode.css" type="text/css" />
    <link rel="stylesheet" href="_static/clickable.css" type="text/css" />
    <link rel="stylesheet" href="_static/pytutor.css" type="text/css" />
    <link rel="stylesheet" href="_static/modal-basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/datafile.css" type="text/css" />
    <link rel="stylesheet" href="_static/dragndrop.css" type="text/css" />
    <link rel="stylesheet" href="_static/fitb.css" type="text/css" />
    <link rel="stylesheet" href="_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="_static/livecode.css" type="text/css" />
    <link rel="stylesheet" href="_static/parsons.css" type="text/css" />
    <link rel="stylesheet" href="_static/lib/prettify.css" type="text/css" />
    <link rel="stylesheet" href="_static/poll.css" type="text/css" />
    <link rel="stylesheet" href="_static/tabbedstuff.css" type="text/css" />
    <link rel="stylesheet" href="_static/video.css" type="text/css" />
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootswatch/2.3.1/""/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/runestonebase.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="_static/bookfuncs.js"></script>
    <script type="text/javascript" src="_static/codemirror.js"></script>
    <script type="text/javascript" src="_static/xml.js"></script>
    <script type="text/javascript" src="_static/css.js"></script>
    <script type="text/javascript" src="_static/htmlmixed.js"></script>
    <script type="text/javascript" src="_static/python.js"></script>
    <script type="text/javascript" src="_static/javascript.js"></script>
    <script type="text/javascript" src="_static/activecode.js"></script>
    <script type="text/javascript" src="_static/skulpt.min.js"></script>
    <script type="text/javascript" src="_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="_static/clike.js"></script>
    <script type="text/javascript" src="_static/timed_activecode.js"></script>
    <script type="text/javascript" src="_static/animationbase.js"></script>
    <script type="text/javascript" src="_static/mchoice.js"></script>
    <script type="text/javascript" src="_static/timedmc.js"></script>
    <script type="text/javascript" src="_static/timed.js"></script>
    <script type="text/javascript" src="_static/clickable.js"></script>
    <script type="text/javascript" src="_static/timedclickable.js"></script>
    <script type="text/javascript" src="_static/d3.v2.min.js"></script>
    <script type="text/javascript" src="_static/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="_static/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="_static/pytutor.js"></script>
    <script type="text/javascript" src="_static/codelens.js"></script>
    <script type="text/javascript" src="_static/skulpt.min.js"></script>
    <script type="text/javascript" src="_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="_static/datafile.js"></script>
    <script type="text/javascript" src="_static/dragndrop.js"></script>
    <script type="text/javascript" src="_static/timeddnd.js"></script>
    <script type="text/javascript" src="_static/fitb.js"></script>
    <script type="text/javascript" src="_static/timedfitb.js"></script>
    <script type="text/javascript" src="_static/livecode.js"></script>
    <script type="text/javascript" src="_static/clike.js"></script>
    <script type="text/javascript" src="_static/lib/prettify.js"></script>
    <script type="text/javascript" src="_static/lib/hammer.min.js"></script>
    <script type="text/javascript" src="_static/parsons.js"></script>
    <script type="text/javascript" src="_static/timedparsons.js"></script>
    <script type="text/javascript" src="_static/poll.js"></script>
    <script type="text/javascript" src="_static/reveal.js"></script>
    <script type="text/javascript" src="_static/shortanswer.js"></script>
    <script type="text/javascript" src="_static/timed_shortanswer.js"></script>
    <script type="text/javascript" src="_static/tabbedstuff.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="_static/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="_static/waypoints.min.js"></script>
    <script type="text/javascript" src="_static/rangy-core.js"></script>
    <script type="text/javascript" src="_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="_static/user-highlights.js"></script>
    <script type="text/javascript" src="_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="top" title="Runestone Interactive Overview" href="index.html" />
    <link rel="up" title="5. Processing Data with Bash" href="bash_toctree.html" />
    <link rel="next" title="5.3. BASH SHELL – FILE UTILITIES / AWK: RECORD &amp; FIELD MANAGEMENT" href="h11.html" />
    <link rel="prev" title="5.1. BASH SHELL" href="h9.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'dsci210';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'dsci210';
</script>

<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>



  </head>
  <body role="document">


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        <a class="brand-logo" style='background: transparent url("_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        <a class="navbar-brand" href="index.html">DSCI 210 Notes</a>
      </div>
    </div>

    <div class="navbar-collapse collapse navbar-ex1-collapse">

      <ul class="nav navbar-nav navbar-right">

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-share-alt" style="opacity: 0.9"></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li>
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='index.html'>Table of Contents</a></li>
            
            <li><a href='/runestone/static/dsci210/genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>

        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='/runestone/static/dsci210/navhelp.html'>Navigation Help</a></li>
            <li><a href='/runestone/static/overview/instructor.html'>Help for Instructors</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='/runestone/default/reportabug?course=dsci210&page=h10'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>

      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        <!--
          <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">5.2. BASH SHELL - GREP</a></li>
</ul>
</ul>
</li>
          <li class="divider-vertical"></li>
        
        
          
  <li id="relations-prev" title="Previous Chapter - 5.1. BASH SHELL" data-toggle="tooltip">
    <a href="h9.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - 5.3. BASH SHELL – FILE UTILITIES / AWK: RECORD &amp; FIELD MANAGEMENT' data-toggle="tooltip" >
    <a href="h11.html" >
      <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

    </div>
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="bash-shell-grep">
<h1>5.2. BASH SHELL - GREP<a class="headerlink" href="#bash-shell-grep" title="Permalink to this headline">¶</a></h1>
<p>Consider once again the Super Bowl baby datasets. The approach taken in
the previous handout was to clean up the file from each year and then
append them together into a single file.</p>
<p><a class="reference internal" href="_images/image110.png"><img alt="image0" src="_images/image110.png" style="width: 4.90480in; height: 0.98125in;" /></a></p>
<p>After creating a single file, this file can easily be read in Excel.</p>
<p><a class="reference internal" href="_images/image21.png"><img alt="image1" src="_images/image21.png" style="width: 4.78125in; height: 2.04684in;" /></a></p>
<p>An alternative approach could be to <strong>*pull out only the information
needed*</strong> for our analyses from these files.</p>
<ul class="simple">
<li>In 2007, the Indianapolis Colts won the Super Bowl. The county
associated with the Indianapolis Colts is Marion County, IN. Thus,
the number of births from this county is needed for our analysis. The
number of births for Marion County, IN is needed for all years.</li>
<li>In 2008 (and 2012), the New York Giants won the Super Bowl. Thus, the
number of births from Bergen County, NJ is needed across all years.</li>
<li>Likewise for the remaining years.</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="43%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Year</th>
<th class="head">Super Bowl Winner</th>
<th class="head">County</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2007</td>
<td>Indianapolis Colts</td>
<td>Marion County, IN</td>
</tr>
<tr class="row-odd"><td>2008</td>
<td>New York Giants</td>
<td>Bergen County, NJ</td>
</tr>
<tr class="row-even"><td>2009</td>
<td>Pittsburgh Steelers</td>
<td>Allegheny County, PA</td>
</tr>
<tr class="row-odd"><td>2010</td>
<td>New Orleans Saints</td>
<td>Orleans Parish, LA</td>
</tr>
<tr class="row-even"><td>2011</td>
<td>Green Bay Packers</td>
<td>Brown County, WI</td>
</tr>
<tr class="row-odd"><td>2012</td>
<td>New York Giants</td>
<td>Bergen County, NJ</td>
</tr>
<tr class="row-even"><td>2013</td>
<td>Baltimore Ravens</td>
<td>Baltimore County, MD</td>
</tr>
<tr class="row-odd"><td>2014</td>
<td>Seattle Seahawks</td>
<td>King County, WA</td>
</tr>
<tr class="row-even"><td>2015</td>
<td>New England Patriots</td>
<td>Suffolk County, MA</td>
</tr>
<tr class="row-odd"><td>2016</td>
<td>Denver Broncos</td>
<td>Denver County, CO</td>
</tr>
<tr class="row-even"><td>2017</td>
<td>New England Patriots</td>
<td>Suffolk County, MA</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>MAC users will need to use <strong>gsed</strong> whenever a sed command is used throughout.</td>
</tr>
</tbody>
</table>
<p>In the previous handout, the following command was used to KEEP only the
lines that started with \t from the Babies_2007.txt file.</p>
<p>$ sed -n &#8216;/^\t/p&#8217; Babies_2007.txt</p>
<p>The command above can be modified as shown below to search for Marion
County, IN in each line across several files. The wildcard character is
used to search across years.</p>
<p>$ sed -n &#8216;/Marion County, IN/p&#8217; Babies_20*.txt &gt;</p>
<p>Colts_MarionCounty.txt</p>
<p>The wildcard character creates the following data stream for sed.</p>
<p><a class="reference internal" href="_images/image31.png"><img alt="image2" src="_images/image31.png" style="width: 6.50000in; height: 0.30625in;" /></a></p>
<p>A quick glance of this output files reveals that the “Total” rows are
included in this file. Thus, modifications will need to be made to the
above command.</p>
<p>$ head -20 Colts_MarionCounty.txt</p>
<p><a class="reference internal" href="_images/image41.png"><img alt="image3" src="_images/image41.png" style="width: 3.50000in; height: 1.22238in;" /></a></p>
<p>The following sed command will print the lines that start with \t AND
contain Marion County, IN. It is necessary to use gsed on a MAC in order
for this command to work.</p>
<div class="math">
\[\ \left\{ Start\ with\ \backslash t \right\}\  \cap \{ Contains\ Marion\ County,\ IN\}\]</div>
<p>$ sed -n &#8216;/^\t/p’ Babies_20*.txt | sed –n ‘/Marion County, IN/p&#8217; &gt;
Colts_MarionCounty.txt</p>
<p>The components of this command are shown here.</p>
<p><a class="reference internal" href="_images/image51.png"><img alt="image4" src="_images/image51.png" style="width: 5.26898in; height: 1.15625in;" /></a></p>
<p>The following command is an alternative to the piped command provided
above. The .* can be interpreted as AND in this context. This approach
appears to be somewhat limiting (I could not get compound .* commands
to work). Mac users need to use gsed here.</p>
<p>$ sed -n &#8216;^\t.*Marion County, IN&#8217; Babies_20*.txt &gt;
Colts_MarionCounty.txt</p>
<p>As seen below the output is as desired; however, notice that information
regarding the Year is not provided. You can add year information to the
file fairly easy as a pattern exists – Jan through Dec is repeated for
each year.</p>
<p>$ head -20 Colts_MarionCounty.txt</p>
<p><a class="reference internal" href="_images/image61.png"><img alt="image5" src="_images/image61.png" style="width: 4.65600in; height: 2.10863in;" /></a></p>
<p><em>Questions</em>:</p>
<ol class="arabic simple">
<li>Your colleague suggest that Year information could be added to the
dataset after bringing it into Excel. She believes the following will
work. Verify whether or not this will work to label the year for each
row in the dataset.</li>
</ol>
<p>=2007+INT(ROW()/12)</p>
<ol class="arabic simple">
<li>Will this function work if more years are added? Discuss.</li>
</ol>
<ul class="simple">
<li></li>
<li></li>
</ul>
<p><em>EDITING with GREP</em></p>
<p>Grep has some advantages over sed when it comes to the management of
strings. Grep stands for <em>G</em>lobally search a <em>R</em>egular
<em>E</em>xpression and <em>P</em>rint and appears to be somewhat more
sophisticated and flexible than sed.</p>
<p><a class="reference internal" href="_images/image71.png"><img alt="image6" src="_images/image71.png" style="width: 4.52000in; height: 2.01939in;" /></a></p>
<p>Using various grep commands to search for lines that start with \t AND
contain Marion County, IN.</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Utility</th>
<th class="head"><p class="first">Command</p>
<p class="last">Outcome</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Sed</td>
<td><p class="first">Command: $ sed -n &#8216;/^\t/p’ &lt;in-file&gt; | sed –n ‘/Marion County, IN/p&#8217; &gt; &lt;out-file&gt;</p>
<p class="last">Outcome: Success – however, no information is provided regarding file origination</p>
</td>
</tr>
<tr class="row-odd"><td>grep</td>
<td><p class="first">Command: $ grep &#8216;^\t’ &lt;in-file&gt; | grep ‘Marion County, IN’ &gt; &lt;out-file&gt;</p>
<p class="last">Outcome: Nothing – grep does not appear to understand \t using it’s default regex interpreter</p>
</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td><p class="first">Command: $ grep &#8216;^\s’ &lt;in-file&gt; | grep ‘Marion County, IN’ &gt; &lt;out-file&gt;</p>
<p class="last">Outcome: Success – grep does appear to understand the more universal \s, i.e. whitespace, character in it’s default regex interpreter</p>
</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td><p class="first">Command: $ grep –P &#8216;^\t’ &lt;in-file&gt; | grep –P ‘Marion County, IN’ &gt; &lt;out-file&gt;</p>
<p class="last">Outcome: Success (on PC, not MAC) – interpret search pattern as a Perl regular expression</p>
</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td><p class="first">Command: $ grep $&#8217;^\t’ &lt;in-file&gt; | grep $‘Marion County, IN’ &gt; &lt;out-file&gt;</p>
<p class="last">Outcome: Success – uses the ANSI C standard for the string</p>
</td>
</tr>
</tbody>
</table>
<p>Consider the following command. This command is using the \s version
from above. Once again the output for Marion County, IN is being saved
into a file named Colts_MarionCounty.txt.</p>
<p>$ grep $&#8217;^\t’ Babies_20*.txt | grep $‘Marion County, IN&#8217; &gt;
Colts_MarionCounty.txt</p>
<p>An alternative to the above that does not use piping.</p>
<p>$ grep $&#8217;^\t.*Marion County, IN&#8217; Babies_20*.txt &gt;
Colts_MarionCounty.txt</p>
<p>Use the head command to look at the output file. Notice that the grep
command has left an identifier for each line. This identifier
corresponds to the file from which this line was found. This identifier
is automatically placed in the file whenever a wildcard is being used in
the in-file.</p>
<p>$ head -20 Colts_MarionCounty.txt</p>
<p><a class="reference internal" href="_images/image81.png"><img alt="image7" src="_images/image81.png" style="width: 6.19006in; height: 2.46875in;" /></a></p>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>GETTING DATA FROM ADDITIONAL COUNTIES
*</p>
<p>The Marion County, IN data is needed for the Indianapolis Colts (2007
Super Bowl). Data from Bergen County, NJ is needed for the New York
Giants (2008 / 2012 Super Bowl).</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="43%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Year</th>
<th class="head">Super Bowl Winner</th>
<th class="head">County</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2007</td>
<td>Indianapolis Colts</td>
<td>Marion County, IN</td>
</tr>
<tr class="row-odd"><td>2008</td>
<td>New York Giants</td>
<td>Bergen County, NJ</td>
</tr>
<tr class="row-even"><td>:</td>
<td>:</td>
<td>:</td>
</tr>
</tbody>
</table>
<p>Thus, all lines start with \t and are from {Marion County, IN or Bergen
County, NJ} will be needed for our analysis.</p>
<div class="math">
\[\left\{ Start\ with\ \backslash t \right\}\  \cap \{ Marion\ County,\ IN \cup Contains\ Bergen\ County,\ NJ\}\]</div>
<p>The grep syntax for the set above is provided here. The left
parenthesis, vertical bar, and right parenthesis characters must be
encapsulated here, i.e. \(, \|, and \). The reason is that by
default grep will look for these characters; however, in this context
these characters are being used to define the desired set of rows to
keep.</p>
<div class="math">
\[\{ Marion\ County,\ IN \cup Bergen\ County,\ NJ\}\]</div>
<p><a class="reference internal" href="_images/image91.png"><img alt="image8" src="_images/image91.png" style="width: 6.50000in; height: 0.79792in;" /></a></p>
<p>The following statement extends to all counties. The output is being
pushed into a file named Babies_AllData.txt.</p>
<p>$ grep $&#8217;^\t’ Babies_20*.txt | grep $‘\(Marion County, IN\|Bergen
County, NJ\|Allegheny County, PA\|Orleans Parish, LA\|Brown
County, WI\|Baltimore County, MD\|King County, WA\)&#8217; &gt;
Babies_AllData.txt</p>
<p><em>Comment</em>: Grep is exact in its searching. For example, if a space is
inadvertently placed before a county name (see below) as grep will be
searching for “_King County, WA” which is different than “King County,
WA”.</p>
<p>$ grep $&#8217;^\t’ Babies_20*.txt | grep $‘\(Marion County, IN\|Bergen
County, NJ\|Allegheny County, PA\|Orleans Parish, LA\|Brown
County, WI\|Baltimore County, MD\|_King County, WA\)&#8217; &gt;
Babies_AllData.txt</p>
<p>The following word count with line option command can be used to count
the number of lines in this file. This appears to be correct.</p>
<p>12 months x 8 years x 7 unique counties = 672</p>
<p>$ wc -l Babies_AllData.txt</p>
<p>672 Babies_AllData.txt</p>
<p><em>ADDING A HEADER</em></p>
<p>Using sed with in-place editing to add a header row to the final
dataset.</p>
<p>$ sed -i &#8216;1 i\File \t County \t County Code \t Month \t Month Code
\t Births&#8217; Babies_AllData.txt</p>
<p>Header row has been successfully added – verified via head and with line
count.</p>
<p>$ head -5 Babies_AllData.txt</p>
<p>File County County Code Month Month Code Births</p>
<p>Babies_2007.txt: &#8220;Marion County, IN&#8221; &#8220;18097&#8221; &#8220;January&#8221; &#8220;1&#8221; 1320</p>
<p>Babies_2007.txt: &#8220;Marion County, IN&#8221; &#8220;18097&#8221; &#8220;February&#8221; &#8220;2&#8221; 1219</p>
<p>Babies_2007.txt: &#8220;Marion County, IN&#8221; &#8220;18097&#8221; &#8220;March&#8221; &#8220;3&#8221; 1295</p>
<p>Babies_2007.txt: &#8220;Marion County, IN&#8221; &#8220;18097&#8221; &#8220;April&#8221; &#8220;4&#8221; 1160</p>
<p>$ wc -l Babies_AllData.txt</p>
<p>673 Babies_AllData.txt</p>
<p>The Babies_AllData.txt file is ready for analysis. A snip-it of this
file in Excel is shown here.</p>
<p><a class="reference internal" href="_images/image101.png"><img alt="image9" src="_images/image101.png" style="width: 4.76800in; height: 2.36000in;" /></a></p>
<p>Once in Excel, the Year information can easily be extracted from the
file name.</p>
<p>=MID(A2,FIND(“_”,A2,1)+1,4)</p>
<p><a class="reference internal" href="_images/image111.png"><img alt="image10" src="_images/image111.png" style="width: 5.54748in; height: 2.00800in;" /></a></p>
<ul class="simple">
<li></li>
<li></li>
</ul>
<p><em>Tasks</em></p>
<p>Consider the following question about the use of grep.</p>
<ol class="arabic">
<li><p class="first">Consider the grep command that is used to extract data from each of
the seven counties for the Super Bowl babies investigation.</p>
<blockquote>
<div><p>$ grep $&#8217;^\t’ Babies_20*.txt | grep $‘\(Marion County,
IN\|Bergen County, NJ\|Allegheny County, PA\|Orleans Parish,
LA\|Brown County, WI\|Baltimore County, MD\|King County,
WA\)&#8217; &gt; Babies_AllData.txt</p>
</div></blockquote>
</li>
</ol>
<ol class="loweralpha">
<li><p class="first">Suppose that you want grep to only search through data files from
2010 – 2014. How would this command change?</p>
</li>
<li><p class="first">Consider the following variation to the grep command. What years are
being included here?</p>
<blockquote>
<div><p>$ grep $&#8217;^\t’ Babies_201[2-4].txt | grep $‘\(Marion County,
IN\|Bergen County, NJ\|Allegheny County, PA\|Orleans Parish,
LA\|Brown County, WI\|Baltimore County, MD\|King County,
WA\)&#8217; &gt; Babies_AllData.txt</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic simple">
<li>What would be the grep command get data for all years, from all seven
counties, but only for the months October, November, and December?
<em>Hint:</em> The most straight forward approach would be to use another
pipe somehow.</li>
<li>What would happen to your command above if there was a county named
October County, MN in this data? Discuss.</li>
</ol>
<p>The following sed (or gsed on MAC) commands can be used to clean the
1<sup>st</sup> column that contains the file name from which grep pulled
this line of data. Excel was used above to clean up this field. The
following sed commands are used to clean up this field in Bash.</p>
<ol class="arabic">
<li><p class="first">Use the following substitute functionality of sed to strip off
Babies_ and .txt of the 1st column of the Babies_AllData.txt
dataset.</p>
<blockquote>
<div><p>Command #1: $ sed -i &#8216;s/Babies_//&#8217; Babies_AllData.txt</p>
<p>Command #2: $ sed -i &#8216;s/.txt://&#8217; Babies_AllData.txt</p>
</div></blockquote>
</li>
</ol>
<ol class="loweralpha">
<li><p class="first">What would happen if there were multiple instances of Babies_ on a
line? Would all instances of Babies_ be replaced with nothing or
only the first? Use a text editor, e.g. Sublime, to add a second
Babies_ in a line to check your answer.</p>
</li>
<li><p class="first">What is the impact of the following change to Command #1?</p>
<p>Command #3: $ sed -i &#8216;s/Babies_//g&#8217; Babies_AllData.txt</p>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Consider the following commands. What do each of these commands do?
In Command 6, what is the purpose of the –r option?</p>
<p>Command #4: $ sed -e &#8216;s/.//7&#8217; Babies_AllData.txt | head -10</p>
<p>Command #5: $ sed -e &#8216;s/.......//&#8217; Babies_AllData.txt | head -10</p>
<p>Command #6: $ sed -r &#8216;s/.{7}//&#8217; Babies_AllData.txt | head -10</p>
</li>
<li><p class="first">Consider the following command. What does this command do?</p>
<blockquote>
<div><p>Command #7: $ sed –e &#8216;s/\.[^:]*://&#8217; Babies_AllData.txt | head
-10</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Using piping to run Command #6 and #7 from above. Save the output
into a file called Babies_AllData_Final.txt. Verify that the File
column includes only the Year and that Babies_ and .txt have been
successfully removed.</p>
<p>Command #8: $ sed -r &#8216;s/.{7}//&#8217; Babies_AllData.txt | sed
&#8216;s/\.[^:]*://&#8217; &gt; Babies_AllData_Final.txt</p>
</li>
</ol>
</div>


  
      
  <li id="relations-prev" class="navLink" title='Previous Section - 5.1. BASH SHELL' data-toggle="tooltip">
    <a href="h9.html" >
      <i class='prevNav glyphicon glyphicon-chevron-left'></i>
    </a>
  </li>
  <a class="navLinkBg" id="navLinkBgLeft"  href="h9.html" ></a>
  
  <li id="relations-next" class="navLink" title='Next Section - 5.3. BASH SHELL – FILE UTILITIES / AWK: RECORD &amp; FIELD MANAGEMENT' data-toggle="tooltip" >
    <a href="h11.html" >
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right'></i>
    </a>
  </li>
  <a class="navLinkBg navLink" id="navLinkBgRight" href="h11.html" >Next Section - 5.3. BASH SHELL – FILE UTILITIES / AWK: RECORD &amp; FIELD MANAGEMENT</a>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});
  
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015 Todd Iverson.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
    </p>
  </div>
</footer>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>