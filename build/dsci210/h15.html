<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>6.4. Basic Graphics in R &mdash; Runestone Interactive Overview</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="_static/activecode.css" type="text/css" />
    <link rel="stylesheet" href="_static/clickable.css" type="text/css" />
    <link rel="stylesheet" href="_static/pytutor.css" type="text/css" />
    <link rel="stylesheet" href="_static/modal-basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/datafile.css" type="text/css" />
    <link rel="stylesheet" href="_static/dragndrop.css" type="text/css" />
    <link rel="stylesheet" href="_static/fitb.css" type="text/css" />
    <link rel="stylesheet" href="_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="_static/livecode.css" type="text/css" />
    <link rel="stylesheet" href="_static/parsons.css" type="text/css" />
    <link rel="stylesheet" href="_static/lib/prettify.css" type="text/css" />
    <link rel="stylesheet" href="_static/poll.css" type="text/css" />
    <link rel="stylesheet" href="_static/tabbedstuff.css" type="text/css" />
    <link rel="stylesheet" href="_static/video.css" type="text/css" />
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootswatch/2.3.1/""/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/runestonebase.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="_static/bookfuncs.js"></script>
    <script type="text/javascript" src="_static/codemirror.js"></script>
    <script type="text/javascript" src="_static/xml.js"></script>
    <script type="text/javascript" src="_static/css.js"></script>
    <script type="text/javascript" src="_static/htmlmixed.js"></script>
    <script type="text/javascript" src="_static/python.js"></script>
    <script type="text/javascript" src="_static/javascript.js"></script>
    <script type="text/javascript" src="_static/activecode.js"></script>
    <script type="text/javascript" src="_static/skulpt.min.js"></script>
    <script type="text/javascript" src="_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="_static/clike.js"></script>
    <script type="text/javascript" src="_static/timed_activecode.js"></script>
    <script type="text/javascript" src="_static/animationbase.js"></script>
    <script type="text/javascript" src="_static/mchoice.js"></script>
    <script type="text/javascript" src="_static/timedmc.js"></script>
    <script type="text/javascript" src="_static/timed.js"></script>
    <script type="text/javascript" src="_static/clickable.js"></script>
    <script type="text/javascript" src="_static/timedclickable.js"></script>
    <script type="text/javascript" src="_static/d3.v2.min.js"></script>
    <script type="text/javascript" src="_static/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="_static/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="_static/pytutor.js"></script>
    <script type="text/javascript" src="_static/codelens.js"></script>
    <script type="text/javascript" src="_static/skulpt.min.js"></script>
    <script type="text/javascript" src="_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="_static/datafile.js"></script>
    <script type="text/javascript" src="_static/dragndrop.js"></script>
    <script type="text/javascript" src="_static/timeddnd.js"></script>
    <script type="text/javascript" src="_static/fitb.js"></script>
    <script type="text/javascript" src="_static/timedfitb.js"></script>
    <script type="text/javascript" src="_static/livecode.js"></script>
    <script type="text/javascript" src="_static/clike.js"></script>
    <script type="text/javascript" src="_static/lib/prettify.js"></script>
    <script type="text/javascript" src="_static/lib/hammer.min.js"></script>
    <script type="text/javascript" src="_static/parsons.js"></script>
    <script type="text/javascript" src="_static/timedparsons.js"></script>
    <script type="text/javascript" src="_static/poll.js"></script>
    <script type="text/javascript" src="_static/reveal.js"></script>
    <script type="text/javascript" src="_static/shortanswer.js"></script>
    <script type="text/javascript" src="_static/timed_shortanswer.js"></script>
    <script type="text/javascript" src="_static/tabbedstuff.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="_static/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="_static/waypoints.min.js"></script>
    <script type="text/javascript" src="_static/rangy-core.js"></script>
    <script type="text/javascript" src="_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="_static/user-highlights.js"></script>
    <script type="text/javascript" src="_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="top" title="Runestone Interactive Overview" href="index.html" />
    <link rel="up" title="6. Processing Data with R" href="R_toctree.html" />
    <link rel="next" title="6.6. Data Management in R" href="h16.html" />
    <link rel="prev" title="6.3. Summaries in R" href="h14.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'dsci210';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'dsci210';
</script>

<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>



  </head>
  <body role="document">


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        <a class="brand-logo" style='background: transparent url("_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        <a class="navbar-brand" href="index.html">DSCI 210 Notes</a>
      </div>
    </div>

    <div class="navbar-collapse collapse navbar-ex1-collapse">

      <ul class="nav navbar-nav navbar-right">

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-share-alt" style="opacity: 0.9"></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li>
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='index.html'>Table of Contents</a></li>
            
            <li><a href='/runestone/static/dsci210/genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>

        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='/runestone/static/dsci210/navhelp.html'>Navigation Help</a></li>
            <li><a href='/runestone/static/overview/instructor.html'>Help for Instructors</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='/runestone/default/reportabug?course=dsci210&page=h15'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>

      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        <!--
          <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">6.4. Basic Graphics in R</a><ul>
<li><a class="reference internal" href="#id5">6.4.1. ***</a></li>
<li><a class="reference internal" href="#id10">6.4.2. ***</a></li>
<li><a class="reference internal" href="#id15">6.4.3. ***</a></li>
<li><a class="reference internal" href="#id20">6.4.4. ***</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-loess-function-in-r-can-be-used-to-obtain-a-loess-smoother-in-r">6.5. The loess() function in R can be used to obtain a loess smoother in R.</a><ul>
<li><a class="reference internal" href="#id25">6.5.1. ***</a></li>
<li><a class="reference internal" href="#id30">6.5.2. ***</a></li>
<li><a class="reference internal" href="#id35">6.5.3. ***</a></li>
<li><a class="reference internal" href="#id40">6.5.4. ***</a></li>
<li><a class="reference internal" href="#id45">6.5.5. ***</a></li>
<li><a class="reference internal" href="#id50">6.5.6. ***</a></li>
<li><a class="reference internal" href="#id55">6.5.7. ***</a></li>
<li><a class="reference internal" href="#id60">6.5.8. ***</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          <li class="divider-vertical"></li>
        
        
          
  <li id="relations-prev" title="Previous Chapter - 6.3. Summaries in R" data-toggle="tooltip">
    <a href="h14.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - 6.6. Data Management in R' data-toggle="tooltip" >
    <a href="h16.html" >
      <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

    </div>
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="basic-graphics-in-r">
<h1>6.4. Basic Graphics in R<a class="headerlink" href="#basic-graphics-in-r" title="Permalink to this headline">¶</a></h1>
<p>This handout will provide an introduction to creating graphics in R.
Here, we will cover only the more basic, traditional graphics. You
should be aware, however, that more advanced users can create more
complex and interesting graphical summaries of data using R.</p>
<p>First, to see some examples of graphs that can be created in R, enter
the following command at the prompt.</p>
<p>&gt; demo(graphics)</p>
<p><strong>*
Histograms and Density Smoothers*</strong></p>
<p>Read the NutritionData file into R.</p>
<p><a class="reference internal" href="_images/image118.png"><img alt="image0" src="_images/image118.png" style="width: 6.00000in; height: 1.16458in;" /></a></p>
<p>Once this data set has been attached, the names in this data frame are
as follows.</p>
<p>&gt; names(NutritionData)</p>
<p>[1] &#8220;Location&#8221; &#8220;ItemName&#8221; &#8220;Type&#8221; &#8220;Calories&#8221; &#8220;TotalFat&#8221;</p>
<p>[6] &#8220;SatFat&#8221; &#8220;Cholesterol&#8221; &#8220;Sodium&#8221; &#8220;Carbohydrates&#8221; &#8220;Fiber&#8221;</p>
<p><strong>*
*</strong>The most basic form of the hist() function is employed below.</p>
<p>&gt; hist(NutritionData$SatFat)</p>
<p><a class="reference internal" href="_images/image215.png"><img alt="image1" src="_images/image215.png" style="width: 2.99130in; height: 1.94331in;" /></a></p>
<div class="section" id="id5">
<h2>6.4.1. <a href="#id1"><span class="problematic" id="id2">**</span></a><a href="#id3"><span class="problematic" id="id4">*</span></a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>As shown in the following documentation, several optional arguments
exist that can be used to modify the resulting plot.</p>
<p><a class="reference internal" href="_images/image314.png"><img alt="image2" src="_images/image314.png" style="width: 5.90688in; height: 3.59130in;" /></a></p>
<p>For example, enter the following options to the hist() function.</p>
<p>&gt; hist(NutritionData$SatFat,breaks=20,freq=F,xlab=&#8221;Saturated Fat&#8221;,
main=&#8221;Histogram of Saturated Fat&#8221;,col=&#8217;gray&#8217;)</p>
<p><a class="reference internal" href="_images/image46.png"><img alt="image3" src="_images/image46.png" style="width: 3.48958in; height: 2.80586in;" /></a></p>
<ul class="simple">
<li></li>
<li></li>
</ul>
<p><em>Questions</em>:</p>
<ol class="arabic simple">
<li>What happens when the freq= option is set to TRUE. What changes?</li>
<li>Can you figure out how to change the breaks option so that there are
breakpoints at 0, 5, 10, 15, 20, 25, and 30? Hint: These values will
need to be entered as a vector.</li>
</ol>
<p><strong>*Adding a Density Smoother to a Histogram in R*</strong></p>
<p>The following command will add a “trend” to the histogram. This trend
line is called a density smoother.</p>
<p>&gt; hist(NutritionData$SatFat,breaks=20,freq=F,xlab=&#8221;Saturated Fat&#8221;,
main=&#8221;Histogram of Saturated Fat&#8221;,col=&#8217;gray&#8217;)</p>
<p>&gt; lines(density(NutritionData$SatFat))</p>
<p><a class="reference internal" href="_images/image55.png"><img alt="image4" src="_images/image55.png" style="width: 3.27826in; height: 2.38736in;" /></a></p>
<p>Once again, several optional arguments exist that can be used to modify
the resulting density smoother.</p>
<p>&gt; help(density)</p>
<p><a class="reference internal" href="_images/image65.png"><img alt="image5" src="_images/image65.png" style="width: 5.81003in; height: 2.65217in;" /></a></p>
<p>&gt; help(lines)</p>
<p><a class="reference internal" href="_images/image75.png"><img alt="image6" src="_images/image75.png" style="width: 6.00000in; height: 1.92917in;" /></a></p>
<p>For example, we can modify the appearance of the histogram/density
smoother as follows:</p>
<p>&gt; hist(NutritionData$SatFat,breaks=40,freq=F,xlab=&#8221;Saturated Fat&#8221;,
main=&#8221;Histogram of Saturated Fat&#8221;, col=&#8217;gray&#8217;)</p>
<p>&gt; lines(density(NutritionData$SatFat,adjust=0.50),lty=2)</p>
<p><a class="reference internal" href="_images/image85.png"><img alt="image7" src="_images/image85.png" style="width: 5.26956in; height: 3.44412in;" /></a></p>
<p><em>Questions</em>:</p>
<ol class="arabic simple">
<li>Change the adjust= option to a few different values. What changes?</li>
<li>Change the lty= option to 5 and then to “dotted”. What changes?</li>
</ol>
</div>
<div class="section" id="id10">
<h2>6.4.2. <a href="#id6"><span class="problematic" id="id7">**</span></a><a href="#id8"><span class="problematic" id="id9">*</span></a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<p><strong>*Boxplots in R*</strong></p>
<p>The most basic form of the boxplot() function is employed below.</p>
<p>&gt; boxplot(NutritionData$SatFat)</p>
<p><a class="reference internal" href="_images/image94.png"><img alt="image8" src="_images/image94.png" style="width: 2.57289in; height: 2.33895in;" /></a></p>
<p>You can learn more about the optional arguments from the help
documentation.</p>
<p>&gt; help(boxplot)</p>
<p>The following can be used to obtain boxplots for Saturated Fat for each
restaurant location.</p>
<div class="line-block">
<div class="line">&gt; boxplot(NutritionData$SatFat ~ NutritionData$Location)</div>
<div class="line"><a class="reference internal" href="_images/image105.png"><img alt="image9" src="_images/image105.png" style="width: 6.00000in; height: 3.34444in;" /></a></div>
</div>
<p>The order in which the restaurants are plotted is determine by the
factor levels. Most often these are alphabetical in order.</p>
<p><a class="reference internal" href="_images/image119.png"><img alt="image10" src="_images/image119.png" style="width: 6.00000in; height: 1.15652in;" /></a></p>
<p>To existing order can be identified using the levels() function.</p>
<p>&gt; levels(NutritionData$Location) <a class="reference internal" href="_images/image124.png"><img alt="image11" src="_images/image124.png" style="width: 6.00000in; height: 0.18750in;" /></a></p>
<p>A new vector for the factor level settings can be used to reassign
levels. The following will reorder the levels so that all the Fast Food
locations are listed first, the Pizza locations second, followed by the
Subs locations.</p>
<p><a class="reference internal" href="_images/image134.png"><img alt="image12" src="_images/image134.png" style="width: 1.66956in; height: 1.77778in;" /></a></p>
<p>&gt; #Change order of factor levels</p>
<p>&gt;
NutritionData$Location&lt;-factor(NutritionData$Location,levels=c(&#8220;BurgerKing&#8221;,&#8221;KFC&#8221;,&#8221;McDonalds&#8221;,&#8221;TacoBell&#8221;,&#8221;Wendys&#8221;,&#8221;Dominos&#8221;,&#8221;PizzaHut&#8221;,&#8221;ErbertGerbert&#8221;,&#8221;Subway&#8221;))</p>
<p><a class="reference internal" href="_images/image144.png"><img alt="image13" src="_images/image144.png" style="width: 5.14043in; height: 3.01227in;" /></a></p>
<p><strong>*Bar Charts / Pie Charts in R*</strong></p>
<p>Barchart are commonly used to display counts from categorical data. The
table() function is used to obtain counts in R.</p>
<p>&gt; table(NutritionData$Location)</p>
<p><a class="reference internal" href="_images/image154.png"><img alt="image14" src="_images/image154.png" style="width: 6.00000in; height: 0.19167in;" /></a></p>
<p>We can pass the output from the table() function directly in the
barplot() function.</p>
<p>&gt; barplot(table(NutritionData$Location))</p>
<p><a class="reference internal" href="_images/image164.png"><img alt="image15" src="_images/image164.png" style="width: 4.74847in; height: 2.70509in;" /></a></p>
<p>A pie chart can be obtained in a similar way.</p>
<p>&gt; pie(table(NutritionData$Location))</p>
<p><a class="reference internal" href="_images/image174.png"><img alt="image16" src="_images/image174.png" style="width: 3.49693in; height: 2.82345in;" /></a></p>
<p>Plots for two-dimensional tables are</p>
<p>&gt; table(NutritionData$Type, NutritionData$Location)</p>
<p><a class="reference internal" href="_images/image184.png"><img alt="image17" src="_images/image184.png" style="width: 6.00000in; height: 1.45278in;" /></a></p>
<p>Getting a stacked barchart for this table. A more appropriate 100%
stacked barchart is provided below.</p>
<p>&gt; barplot(table(NutritionData$Type, NutritionData$Location),
legend=TRUE)</p>
<p><a class="reference internal" href="_images/image194.png"><img alt="image18" src="_images/image194.png" style="width: 6.00000in; height: 3.70278in;" /></a></p>
<p>A 100% stacked barchart can be obtained as follows.</p>
<p>&gt; table.of.counts&lt;-table(NutritionData$Type,NutritionData$Location)</p>
<p>&gt; barplot(prop.table(table.of.counts,2),legend=TRUE)</p>
<p><a class="reference internal" href="_images/image203.png"><img alt="image19" src="_images/image203.png" style="width: 4.98261in; height: 2.90018in;" /></a></p>
</div>
<div class="section" id="id15">
<h2>6.4.3. <a href="#id11"><span class="problematic" id="id12">**</span></a><a href="#id13"><span class="problematic" id="id14">*</span></a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<p><strong>*Scatterplots and Smoothers*</strong></p>
<p>Scatterplots are simple to create in R using the plot() function. For
example, we could examine the relationship between <em>Saturated Fat</em> and
<em>Total Fat</em> by creating the following plot.</p>
<p>&gt; plot(TotalFat~SatFat,data=NutritionData)</p>
<p><a class="reference internal" href="_images/image216.png"><img alt="image20" src="_images/image216.png" style="width: 4.45217in; height: 3.38602in;" /></a></p>
<p>To add a trend line (i.e., the regression line) to this plot, you can
use the abline() and lm() function.</p>
<p>&gt; abline(lm(TotalFat~SatFat,data=NutritionData))</p>
<p><a class="reference internal" href="_images/image224.png"><img alt="image21" src="_images/image224.png" style="width: 4.05217in; height: 3.03163in;" /></a></p>
</div>
<div class="section" id="id20">
<h2>6.4.4. <a href="#id16"><span class="problematic" id="id17">**</span></a><a href="#id18"><span class="problematic" id="id19">*</span></a><a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<p>Loess smoothers are a common alternative to regression models in data
science. Loess models are more flexible than regression-type smoothers.
There are advantages and disadvantages to all models.</p>
<p>Loess Regression Wiki page:
<a class="reference external" href="https://en.wikipedia.org/wiki/Local_regression">https://en.wikipedia.org/wiki/Local_regression</a></p>
<p><a class="reference internal" href="_images/image233.png"><img alt="image22" src="_images/image233.png" style="width: 5.37391in; height: 2.60983in;" /></a></p>
</div>
</div>
<div class="section" id="the-loess-function-in-r-can-be-used-to-obtain-a-loess-smoother-in-r">
<h1>6.5. The loess() function in R can be used to obtain a loess smoother in R.<a class="headerlink" href="#the-loess-function-in-r-can-be-used-to-obtain-a-loess-smoother-in-r" title="Permalink to this headline">¶</a></h1>
<p>&gt; #Creating the intial plot</p>
<p>&gt; plot(TotalFat~SatFat,data=NutritionData)</p>
<p>&gt;</p>
<p>&gt; #Fitting a loess model</p>
<p>&gt; fit&lt;-loess(TotalFat~SatFat,data=NutritionData)</p>
<p>&gt;</p>
<p>&gt; #Using a generic sequence for x to obtain a prediction line</p>
<p>&gt; #lines(seq(0,30,1),
predict(fit,newdata=data.frame(SatFat=seq(0,30,1))))</p>
<p>&gt;</p>
<p>&gt; #Using actual SatFat data valus to obtain a prediction</p>
<p>&gt; lines(sort(NutritionData$SatFat),
predict(fit,newdata=NutritionData[order(NutritionData$SatFat),]))</p>
<p>The span= option within the loess() function controls the amount of
smoothing being done. The lower the span value, the less smoothing that
is done.</p>
<p>&gt; fit&lt;-loess(TotalFat~SatFat,data=NutritionData, span=.4)</p>
<div class="section" id="id25">
<h2>6.5.1. <a href="#id21"><span class="problematic" id="id22">**</span></a><a href="#id23"><span class="problematic" id="id24">*</span></a><a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="70%" />
<col width="30%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><p class="first">Span = 0.75 (default setting)</p>
<p class="last"><a class="reference internal" href="_images/image243.png"><img alt="image23" src="_images/image243.png" style="width: 2.60000in; height: 2.42065in;" /></a></p>
</td>
<td><p class="first">Span = 0.3</p>
<p class="last"><a class="reference internal" href="_images/image252.png"><img alt="image24" src="_images/image252.png" style="width: 2.60870in; height: 2.42663in;" /></a></p>
</td>
</tr>
</tbody>
</table>
<p><strong>*(Optional) Graphical Parameters*</strong></p>
<p>&gt; par(mfrow=c(1,2)) #Create a 1 x 2 grid for plotting</p>
<p>&gt; par(pty=&#8221;s&#8221;) #Force square plotting region, par(pty=&#8221;m&#8221;) will change
back to default</p>
<p>&gt;help(par) # for others – several to choose from</p>
<p><a class="reference internal" href="_images/image262.png"><img alt="image25" src="_images/image262.png" style="width: 6.00000in; height: 2.58125in;" /></a></p>
<p>The following command will change the range on the x- and y-axis from
the defaults.</p>
<p>&gt; plot(TotalFat~SatFat,data=NutritionData, xlab=&#8221;Saturated Fat&#8221;,
ylab=&#8221;Total Fat&#8221;, xlim=c(0,60), ylim=c(0,60))</p>
<p><a class="reference internal" href="_images/image272.png"><img alt="image26" src="_images/image272.png" style="width: 3.84759in; height: 2.93913in;" /></a></p>
<p>Options can be specified for the points as well. The col= option can be
used to change the color and the pch= option specifies the plotting
character. The list of plotting characters is provided here.</p>
<p><a class="reference internal" href="_images/image282.png"><img alt="image27" src="_images/image282.png" style="width: 6.00000in; height: 0.50769in;" /></a></p>
<p>To following change the color to blue and uses plotting character 2,
i.e. a triangle.</p>
<p>&gt; plot(TotalFat~SatFat,data=NutritionData, xlab=&#8221;Saturated Fat&#8221;,
ylab=&#8221;Total Fat&#8221;, col=&#8221;blue&#8221;,pch=2)</p>
<p><a class="reference internal" href="_images/image292.png"><img alt="image28" src="_images/image292.png" style="width: 4.36522in; height: 3.34364in;" /></a></p>
</div>
<div class="section" id="id30">
<h2>6.5.2. <a href="#id26"><span class="problematic" id="id27">**</span></a><a href="#id28"><span class="problematic" id="id29">*</span></a><a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h2>
<p>For the next set of plots, we will create a subset of the NutritionData</p>
<p>&gt; BeefChickenData &lt;- NutritionData[NutritionData$Type %in%
c(&#8220;Beef&#8221;,&#8221;Chicken&#8221;), ]</p>
</div>
<div class="section" id="id35">
<h2>6.5.3. <a href="#id31"><span class="problematic" id="id32">**</span></a><a href="#id33"><span class="problematic" id="id34">*</span></a><a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&nbsp;</td>
<td>Consider the following subset for next plot…
<a class="reference internal" href="_images/image302.png"><img alt="image29" src="_images/image302.png" style="width: 3.99130in; height: 0.37005in;" /></a></td>
</tr>
</tbody>
</table>
<p>The following sequence of commands will create the plot below.</p>
<p>&gt; plot(TotalFat~SatFat,data=BeefChickenData,xlab=&#8221;Saturated Fat&#8221;,
ylab=&#8221;Total Fat&#8221;, col=c(&#8220;red&#8221;,&#8221;blue&#8221;)[match(Type,c(&#8220;Beef&#8221;,&#8221;Chicken&#8221;))])</p>
<p>&gt;
abline(lm(TotalFat~SatFat,data=BeefChickenData[BeefChickenData$Type==&#8221;Beef&#8221;,]),col=&#8221;red&#8221;)</p>
<p>&gt;
abline(lm(TotalFat~SatFat,data=BeefChickenData[BeefChickenData$Type==&#8221;Chicken&#8221;,]),col=&#8221;blue&#8221;)</p>
<p>&gt; abline(0,1,col=&#8221;gray&#8221;,lty=2)</p>
<p><a class="reference internal" href="_images/image315.png"><img alt="image30" src="_images/image315.png" style="width: 4.61156in; height: 3.48672in;" /></a></p>
<p>A legend can be added to this plot using the legend() function.</p>
<p>&gt; legend(&#8220;bottomright&#8221;,legend=c(&#8220;Beef&#8221;,&#8221;Chicken&#8221;),fill=c(&#8220;red&#8221;,&#8221;blue&#8221;))</p>
<p>The following code is used to add loess smoothers to the scatterplot.</p>
<p>&gt; #Plots with Loess smoothers</p>
<p>&gt; plot(TotalFat~SatFat,data=BeefChickenData,xlab=&#8221;Saturated Fat&#8221;,
ylab=&#8221;Total Fat&#8221;,</p>
<ul class="simple">
<li>col=c(&#8220;red&#8221;,&#8221;blue&#8221;)[match(Type,c(&#8220;Beef&#8221;,&#8221;Chicken&#8221;))])</li>
</ul>
<p>&gt;</p>
<p>&gt;
fit.beef&lt;-loess(TotalFat~SatFat,data=BeefChickenData[BeefChickenData$Type==&#8221;Beef&#8221;,])</p>
<p>&gt; lines(sort(BeefChickenData[BeefChickenData$Type == &#8220;Beef&#8221;,6]),
sort(predict(fit.beef,newdata=BeefChickenData[BeefChickenData$Type ==
&#8220;Beef&#8221;,])), col=&#8221;red&#8221;)</p>
<p>&gt;</p>
<p>&gt;
fit.chicken&lt;-loess(TotalFat~SatFat,data=BeefChickenData[BeefChickenData$Type==&#8221;Chicken&#8221;,])</p>
<p>&gt; lines(sort(BeefChickenData[BeefChickenData$Type == &#8220;Chicken&#8221;,6]),
sort(predict(fit.chicken,newdata=BeefChickenData[BeefChickenData$Type ==
&#8220;Chicken&#8221;,])), col=&#8221;blue&#8221;)</p>
<p>&gt; abline(0,1,col=&#8221;gray&#8221;,lty=2)</p>
<p>&gt; legend(&#8220;bottomright&#8221;,legend=c(&#8220;Beef&#8221;,&#8221;Chicken&#8221;),fill=c(&#8220;red&#8221;,&#8221;blue&#8221;))</p>
<p><a class="reference internal" href="_images/image322.png"><img alt="image31" src="_images/image322.png" style="width: 5.18261in; height: 4.80471in;" /></a></p>
<p>The type=”n” option in the plot() function prevents the points from
being plotted.</p>
<p>&gt; plot(TotalFat~SatFat,data=BeefChickenData,xlab=&#8221;Saturated Fat&#8221;,
ylab=&#8221;Total Fat&#8221;,</p>
<ul class="simple">
<li>col=c(&#8220;red&#8221;,&#8221;blue&#8221;)[match(Type,c(&#8220;Beef&#8221;,&#8221;Chicken&#8221;))], type=&#8221;n&#8221;)</li>
</ul>
</div>
<div class="section" id="id40">
<h2>6.5.4. <a href="#id36"><span class="problematic" id="id37">**</span></a><a href="#id38"><span class="problematic" id="id39">*</span></a><a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h2>
<p><strong>*Advanced Plotting*</strong></p>
<p>The lattice package is a powerful graphical package available in R. The
most cutting-edge package for plotting is ggplot2. The ggplot2 package
will not be covered in this handout.</p>
<p><a class="reference internal" href="_images/image331.png"><img alt="image32" src="_images/image331.png" style="width: 3.10435in; height: 2.25249in;" /></a></p>
<p>To load this (or any other) package in R, go to the lower right-hand
window of the R Studio window. You can search for the package of
interest.</p>
<p><a class="reference internal" href="_images/image341.png"><img alt="image33" src="_images/image341.png" style="width: 5.26042in; height: 0.68750in;" /></a></p>
<p>Here, you can check the box next to “lattice” and note that R
automatically runs the following command.</p>
<p>&gt; library(lattice)</p>
</div>
<div class="section" id="id45">
<h2>6.5.5. <a href="#id41"><span class="problematic" id="id42">**</span></a><a href="#id43"><span class="problematic" id="id44">*</span></a><a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h2>
<p><strong>*Obtaining a Histogram Using the Lattice Package*</strong></p>
<p>You can use the histogram() function once the lattice package has been
installed:</p>
<p>&gt; histogram( ~ SatFat, data=NutritionData)</p>
<p><a class="reference internal" href="_images/image351.png"><img alt="image34" src="_images/image351.png" style="width: 4.23585in; height: 3.11315in;" /></a></p>
<p>A more interesting display would compare the distribution of Saturated
Fat across Location. This is easily implemented with lattice graphics.</p>
<p>&gt; histogram(~SatFat|Location,data=NutritionData, col=&#8221;gray&#8221;)</p>
<p><a class="reference internal" href="_images/image361.png"><img alt="image35" src="_images/image361.png" style="width: 5.04348in; height: 3.49366in;" /></a></p>
</div>
<div class="section" id="id50">
<h2>6.5.6. <a href="#id46"><span class="problematic" id="id47">**</span></a><a href="#id48"><span class="problematic" id="id49">*</span></a><a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h2>
<p><strong>*Obtaining a Density Plot Using the Lattice Package*</strong></p>
<p>&gt; densityplot(~SatFat|Location,data=NutritionData, col=&#8221;black&#8221;,
plot.points=FALSE)</p>
<p><a class="reference internal" href="_images/image371.png"><img alt="image36" src="_images/image371.png" style="width: 6.00000in; height: 4.26736in;" /></a></p>
<ul class="simple">
<li></li>
</ul>
<p>Question:* Re-submit the above command with the plot.points argument
omitted. What happens?</p>
<p>Note that instead of displaying the density plots in a separate panels
for each location, R can alternatively overlay the density plots as
following by way of the groups= option.</p>
<p>&gt; densityplot(~SatFat, data=NutritionData, groups=Location,
plot.points=FALSE, auto.key=TRUE)</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="_images/image381.png"><img alt="image37" src="_images/image381.png" style="width: 4.11043in; height: 2.98054in;" /></a></td>
<td><a class="reference internal" href="_images/image391.png"><img alt="image38" src="_images/image391.png" style="width: 1.63542in; height: 1.30208in;" /></a></td>
</tr>
</tbody>
</table>
<p>An example with more clarity is given for the Beef and Chicken subset
datasets.</p>
<p>&gt; densityplot(~SatFat, data=BeefChickenData, groups=Type,
plot.points=FALSE, auto.key=TRUE)</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="_images/image401.png"><img alt="image39" src="_images/image401.png" style="width: 3.73248in; height: 2.05935in;" /></a></td>
<td><a class="reference internal" href="_images/image412.png"><img alt="image40" src="_images/image412.png" style="width: 1.33121in; height: 1.33121in;" /></a></td>
</tr>
</tbody>
</table>
<p>Notice that the legend is incorrect and appears to be using the factor
levels from the NutritionData and not the Beef and Chicken subset.</p>
<p>&gt; str(BeefChickenData)</p>
<p><a class="reference internal" href="_images/image422.png"><img alt="image41" src="_images/image422.png" style="width: 6.00000in; height: 1.18542in;" /></a></p>
<p>Update the factor level settings for Type in the Beef and Chicken
subset.</p>
<p>&gt;
BeefChickenData$Type&lt;-factor(BeefChickenData$Type,levels=c(&#8220;Beef&#8221;,&#8221;Chicken&#8221;))</p>
<p>&gt; str(BeefChickenData)</p>
<p><a class="reference internal" href="_images/image431.png"><img alt="image42" src="_images/image431.png" style="width: 6.00000in; height: 1.21875in;" /></a></p>
<p>The legend now correctly corresponds with the plot.</p>
<p>&gt; densityplot(~SatFat, data=BeefChickenData, groups=Type,
plot.points=FALSE, auto.key=TRUE)</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="_images/image441.png"><img alt="image43" src="_images/image441.png" style="width: 3.64968in; height: 2.48550in;" /></a></td>
<td><a class="reference internal" href="_images/image451.png"><img alt="image44" src="_images/image451.png" style="width: 1.31250in; height: 0.41667in;" /></a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id55">
<h2>6.5.7. <a href="#id51"><span class="problematic" id="id52">**</span></a><a href="#id53"><span class="problematic" id="id54">*</span></a><a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h2>
<p><strong>*Obtaining a Scatterplot Using Lattice*</strong></p>
<p>&gt; xyplot(TotalFat~SatFat, data=NutritionData)</p>
<p><a class="reference internal" href="_images/image461.png"><img alt="image45" src="_images/image461.png" style="width: 3.01887in; height: 2.52166in;" /></a></p>
<p>Next, note that you can also obtain the scatterplot above for each
location fairly easily using the built-in conditioning functionality
provided by the lattice package.</p>
<p>&gt; xyplot(TotalFat~SatFat | Location, data=NutritionData)</p>
<p><a class="reference internal" href="_images/image47.png"><img alt="image46" src="_images/image47.png" style="width: 5.04717in; height: 4.31054in;" /></a></p>
<p>&gt; xyplot(TotalFat~SatFat|Location,data=NutritionData, type=&#8221;smooth&#8221;)</p>
<p><a class="reference internal" href="_images/image48.png"><img alt="image47" src="_images/image48.png" style="width: 2.97170in; height: 2.52629in;" /></a></p>
<p>&gt; xyplot(TotalFat~SatFat|Location,data=NutritionData,
type=c(&#8220;p&#8221;,&#8221;smooth&#8221;))</p>
<p><a class="reference internal" href="_images/image49.png"><img alt="image48" src="_images/image49.png" style="width: 4.98416in; height: 4.32075in;" /></a></p>
<p>Finally, a completely custom panel function can be specified. The
following custom panel function will use plotting character 2, the size
of the points will be reduced using cex, the loess fit will be blue and
thicker than usual through the use of the lwd option.</p>
<p>&gt; panel.smoother &lt;- function(x, y) {</p>
<ul class="simple">
<li>panel.xyplot(x, y, pch=2, cex=0.5) # show points</li>
<li>panel.loess(x, y, col=&#8221;black&#8221;, lwd=2) # show smoothed line</li>
<li>}</li>
</ul>
<p>This custom function is then called with the panel= option in the
xyplot.</p>
<p>&gt; xyplot(TotalFat~SatFat|Location,data=NutritionData, panel =
panel.smoother)</p>
<p><a class="reference internal" href="_images/image50.png"><img alt="image49" src="_images/image50.png" style="width: 5.07547in; height: 4.39757in;" /></a></p>
</div>
<div class="section" id="id60">
<h2>6.5.8. <a href="#id56"><span class="problematic" id="id57">**</span></a><a href="#id58"><span class="problematic" id="id59">*</span></a><a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h2>
<p><strong>*Obtaining Scatterplot Matrices without Lattice Package*</strong></p>
<p>&gt; pairs(NutritionData[,5:10], panel=panel.smooth)</p>
<p><a class="reference internal" href="_images/image511.png"><img alt="image50" src="_images/image511.png" style="width: 6.00000in; height: 4.51458in;" /></a></p>
<p>There is a function that accompanies the “An R Companion to Applied
Regression.” This package is called car. Install this package and load
it contents into R.</p>
<p><a class="reference internal" href="_images/image521.png"><img alt="image51" src="_images/image521.png" style="width: 3.33177in; height: 2.37736in;" /></a></p>
<p><a class="reference internal" href="_images/image531.png"><img alt="image52" src="_images/image531.png" style="width: 5.29167in; height: 0.82292in;" /></a></p>
<p>After the car package is downloaded and installed, the
scatterplotMatrix() function can be used to create a scatterplot matrix
with loess smoothers in each panel. The syntax of this function is akin
to the lattice package.</p>
<p>&gt; scatterplotMatrix( ~ (TotalFat+SatFat+Carbohydrates+Fiber)|Type,
data=BeefChickenData)</p>
<p><a class="reference internal" href="_images/image541.png"><img alt="image53" src="_images/image541.png" style="width: 5.46226in; height: 4.03727in;" /></a></p>
<p><strong>*Task*</strong></p>
<p>For this task, we will consider the airline data. Of interest is the
rate in which flights are cancelled or delayed. This data can be
downloaded from the following site:</p>
<p><a class="reference external" href="http://www.transtats.bts.gov/DL_SelectFields.asp?Table_ID=236&amp;DB_Short_Name=On-Time">http://www.transtats.bts.gov/DL_SelectFields.asp?Table_ID=236&amp;DB_Short_Name=On-Time</a></p>
<p><a class="reference internal" href="_images/image551.png"><img alt="image54" src="_images/image551.png" style="width: 6.00000in; height: 3.64931in;" /></a></p>
<p>You must specify which Field Names to include. The following fields
should be downloaded.</p>
<ul class="simple">
<li></li>
<li></li>
</ul>
<p><em>Questions</em></p>
<ol class="arabic simple">
<li>Create a barplot to show the cancellation rate of flights by day of
week. Which day of the week has the largest percentage of flights?</li>
<li>Create a barplot to show the cancellation rate of flights by carrier,
i.e. airline. Which carrier appears to cancel the largest percentage
of flights?</li>
</ol>
<p>For the following you may want to create a subset of the full dataset.
You can create a subset however you’d like, e.g. narrow your focus to
just Chicago O’Hare – Code: ORD. The following can be used to create a
random subset of 10000 observations from a data.frame named Delay.</p>
<blockquote>
<div>&gt; mysubset&lt;-Delay[sample(1:dim(Delay)[1],size=10000),]</div></blockquote>
<ol class="arabic">
<li><p class="first">Use a command similar to this to obtain the average delay across all
flights for Carrier delay, weather delay, NAS delay, security delay,
and late aircraft delay. These columns are contained within columns
13:17 for my data.frame.</p>
<blockquote>
<div><p>&gt; apply(Delay[,13:17],2,function(x){mean(x,na.rm=TRUE)})</p>
</div></blockquote>
</li>
</ol>
<p>Which type of delay is the longest on average? Why is the na.rm required
for the apply function to work?</p>
<ol class="arabic simple">
<li>Create some type of plot for the averages from above. What type of
plot did you decide to create?</li>
<li>Consider the above problem, which type of delay has the most amount
of variation, i.e. largest standard deviation?</li>
<li>Your friend insists on flying early in the day to avoid delays. Is
there any truth that flights earlier in the day are less likely be
delayed? Create a plot to communicate your findings.</li>
<li>How often does a flight leave early and arrive early? How often does
a flight leave late, but arrive early? Hint: You will likely need to
create new variables for this and then use the table() function on
your new variables.</li>
</ol>
</div>
</div>


  
      
  <li id="relations-prev" class="navLink" title='Previous Section - 6.3. Summaries in R' data-toggle="tooltip">
    <a href="h14.html" >
      <i class='prevNav glyphicon glyphicon-chevron-left'></i>
    </a>
  </li>
  <a class="navLinkBg" id="navLinkBgLeft"  href="h14.html" ></a>
  
  <li id="relations-next" class="navLink" title='Next Section - 6.6. Data Management in R' data-toggle="tooltip" >
    <a href="h16.html" >
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right'></i>
    </a>
  </li>
  <a class="navLinkBg navLink" id="navLinkBgRight" href="h16.html" >Next Section - 6.6. Data Management in R</a>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});
  
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015 Todd Iverson.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
    </p>
  </div>
</footer>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>